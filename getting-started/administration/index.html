<!DOCTYPE html>
<html lang="en">
  
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Typelevel Laika + Helium Theme" />
  <title>Managing Queues</title>
  
  <meta name="author" content="fs2-queues contributors"/>
  
  
  <meta name="description" content="docs"/>
  
  
  
  <link rel="icon" sizes="32x32" type="image/png" href="../../favicon-32x32.png"/>
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700">
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Mono:500">
  
  <link rel="stylesheet" type="text/css" href="../../helium/site/icofont.min.css" />
    <link rel="stylesheet" type="text/css" href="../../helium/site/laika-helium.css" />
  <script src="../../helium/site/laika-helium.js"></script>
  
  
  <script> /* for avoiding page load transitions */ </script>
</head>

  <body>

    <header id="top-bar" class="light-default dark-default">

  <div class="row">
    <a id="nav-icon">
      <i class="icofont-laika navigationMenu" title="Navigation">&#xefa2;</i>
    </a>
    
    
  </div>

  <a class="text-link" href="../../">fs2-queues</a>

  <div class="row links">
    
    <a class="icon-link svg-link" href="https://www.javadoc.io/doc/com.commercetools/fs2-queues-docs_2.13/0.5.0/com/commercetools/queue/index.html"><span class="api" title="API"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
  <g class="svg-shape">
    <path d="M75,47.5c13.246,0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm-50,-0c13.246,-0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,-0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm2.705,16.735l7.239,0l0.622,-4.904l-21.833,0l-0,4.904l7.589,0l0,22.067l6.383,0l-0,-22.067Zm58.076,7.265c-0,-8.757 -3.698,-14.166 -10.781,-14.166c-7.083,-0 -10.781,5.604 -10.781,14.166c0,8.757 3.698,14.166 10.781,14.166c7.083,0 10.781,-5.604 10.781,-14.166Zm-6.539,0c0,6.538 -1.128,9.496 -4.242,9.496c-2.997,0 -4.242,-2.88 -4.242,-9.496c-0,-6.616 1.206,-9.496 4.242,-9.496c3.036,-0 4.242,2.88 4.242,9.496Zm-29.242,-67c13.246,0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm0.512,9.834c-7.122,-0 -12.609,5.098 -12.609,14.127c-0,9.263 5.215,14.205 12.532,14.205c4.164,0 7.083,-1.634 9.068,-3.658l-2.88,-3.697c-1.518,1.206 -3.153,2.413 -5.838,2.413c-3.697,-0 -6.266,-2.763 -6.266,-9.263c-0,-6.616 2.724,-9.379 6.149,-9.379c2.102,-0 3.892,0.778 5.371,1.984l3.113,-3.775c-2.257,-1.868 -4.748,-2.957 -8.64,-2.957Z"/>
  </g>
</svg></span></a>
    
    <a class="icon-link svg-link" href="https://github.com/commercetools/fs2-queues"><span class="github" title="Source Code"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
  <g class="svg-shape">
    <path d="M49.995,1c-27.609,-0 -49.995,22.386 -49.995,50.002c-0,22.09 14.325,40.83 34.194,47.444c2.501,0.458 3.413,-1.086 3.413,-2.412c0,-1.185 -0.043,-4.331 -0.067,-8.503c-13.908,3.021 -16.843,-6.704 -16.843,-6.704c-2.274,-5.773 -5.552,-7.311 -5.552,-7.311c-4.54,-3.103 0.344,-3.042 0.344,-3.042c5.018,0.356 7.658,5.154 7.658,5.154c4.46,7.64 11.704,5.433 14.552,4.156c0.454,-3.232 1.744,-5.436 3.174,-6.685c-11.102,-1.262 -22.775,-5.553 -22.775,-24.713c-0,-5.457 1.949,-9.92 5.147,-13.416c-0.516,-1.265 -2.231,-6.348 0.488,-13.233c0,0 4.199,-1.344 13.751,5.126c3.988,-1.108 8.266,-1.663 12.518,-1.682c4.245,0.019 8.523,0.574 12.517,1.682c9.546,-6.47 13.736,-5.126 13.736,-5.126c2.728,6.885 1.013,11.968 0.497,13.233c3.204,3.496 5.141,7.959 5.141,13.416c0,19.209 -11.691,23.436 -22.83,24.673c1.795,1.544 3.394,4.595 3.394,9.26c0,6.682 -0.061,12.076 -0.061,13.715c0,1.338 0.899,2.894 3.438,2.406c19.853,-6.627 34.166,-25.354 34.166,-47.438c-0,-27.616 -22.389,-50.002 -50.005,-50.002"/>
  </g>
</svg></span></a>
    
  </div>  

</header>
    
    <nav id="sidebar">

  <div class="row">
    
    <a class="icon-link svg-link" href="https://www.javadoc.io/doc/com.commercetools/fs2-queues-docs_2.13/0.5.0/com/commercetools/queue/index.html"><span class="api" title="API"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
  <g class="svg-shape">
    <path d="M75,47.5c13.246,0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm-50,-0c13.246,-0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,-0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm2.705,16.735l7.239,0l0.622,-4.904l-21.833,0l-0,4.904l7.589,0l0,22.067l6.383,0l-0,-22.067Zm58.076,7.265c-0,-8.757 -3.698,-14.166 -10.781,-14.166c-7.083,-0 -10.781,5.604 -10.781,14.166c0,8.757 3.698,14.166 10.781,14.166c7.083,0 10.781,-5.604 10.781,-14.166Zm-6.539,0c0,6.538 -1.128,9.496 -4.242,9.496c-2.997,0 -4.242,-2.88 -4.242,-9.496c-0,-6.616 1.206,-9.496 4.242,-9.496c3.036,-0 4.242,2.88 4.242,9.496Zm-29.242,-67c13.246,0 24,10.754 24,24c0,13.246 -10.754,24 -24,24c-13.246,0 -24,-10.754 -24,-24c0,-13.246 10.754,-24 24,-24Zm0.512,9.834c-7.122,-0 -12.609,5.098 -12.609,14.127c-0,9.263 5.215,14.205 12.532,14.205c4.164,0 7.083,-1.634 9.068,-3.658l-2.88,-3.697c-1.518,1.206 -3.153,2.413 -5.838,2.413c-3.697,-0 -6.266,-2.763 -6.266,-9.263c-0,-6.616 2.724,-9.379 6.149,-9.379c2.102,-0 3.892,0.778 5.371,1.984l3.113,-3.775c-2.257,-1.868 -4.748,-2.957 -8.64,-2.957Z"/>
  </g>
</svg></span></a>
    
    <a class="icon-link svg-link" href="https://github.com/commercetools/fs2-queues"><span class="github" title="Source Code"><svg class="svg-icon" width="100%" height="100%" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
  <g class="svg-shape">
    <path d="M49.995,1c-27.609,-0 -49.995,22.386 -49.995,50.002c-0,22.09 14.325,40.83 34.194,47.444c2.501,0.458 3.413,-1.086 3.413,-2.412c0,-1.185 -0.043,-4.331 -0.067,-8.503c-13.908,3.021 -16.843,-6.704 -16.843,-6.704c-2.274,-5.773 -5.552,-7.311 -5.552,-7.311c-4.54,-3.103 0.344,-3.042 0.344,-3.042c5.018,0.356 7.658,5.154 7.658,5.154c4.46,7.64 11.704,5.433 14.552,4.156c0.454,-3.232 1.744,-5.436 3.174,-6.685c-11.102,-1.262 -22.775,-5.553 -22.775,-24.713c-0,-5.457 1.949,-9.92 5.147,-13.416c-0.516,-1.265 -2.231,-6.348 0.488,-13.233c0,0 4.199,-1.344 13.751,5.126c3.988,-1.108 8.266,-1.663 12.518,-1.682c4.245,0.019 8.523,0.574 12.517,1.682c9.546,-6.47 13.736,-5.126 13.736,-5.126c2.728,6.885 1.013,11.968 0.497,13.233c3.204,3.496 5.141,7.959 5.141,13.416c0,19.209 -11.691,23.436 -22.83,24.673c1.795,1.544 3.394,4.595 3.394,9.26c0,6.682 -0.061,12.076 -0.061,13.715c0,1.338 0.899,2.894 3.438,2.406c19.853,-6.627 34.166,-25.354 34.166,-47.438c-0,-27.616 -22.389,-50.002 -50.005,-50.002"/>
  </g>
</svg></span></a>
    
  </div>

  <ul class="nav-list">
    <li class="level1 nav-leaf"><a href="../../">Home</a></li>
    <li class="level1 nav-header">Getting Started</li>
    <li class="level2 nav-leaf"><a href="../queues/">Common Queue Interface</a></li>
    <li class="level2 nav-leaf"><a href="../publishing/">Publishing Data</a></li>
    <li class="level2 nav-leaf"><a href="../subscribing/">Receiving Data</a></li>
    <li class="level2 nav-leaf"><a href="../stats/">Queue Statistics</a></li>
    <li class="level2 active nav-leaf"><a href="#">Managing Queues</a></li>
    <li class="level2 nav-leaf"><a href="../serialization/">Data Serialization</a></li>
    <li class="level2 nav-leaf"><a href="../testing/">Testing</a></li>
    <li class="level1 nav-header">Queue Systems</li>
    <li class="level2 nav-leaf"><a href="../../systems/">Providers</a></li>
    <li class="level2 nav-leaf"><a href="../../systems/sqs/">AWS SQS</a></li>
    <li class="level2 nav-leaf"><a href="../../systems/service-bus/">Azure Service Bus Queues</a></li>
    <li class="level2 nav-leaf"><a href="../../systems/pubsub/">GCP PubSub</a></li>
    <li class="level1 nav-header">Library Integrations</li>
    <li class="level2 nav-leaf"><a href="../../integrations/circe/">Circe</a></li>
    <li class="level2 nav-leaf"><a href="../../integrations/otel4s/">Otel4s</a></li>
  </ul>

</nav>

    <div id="container">

      
<nav id="page-nav">
  <p class="header"><a href="#">Managing Queues</a></p>

  <ul class="nav-list">
    <li class="level1 nav-leaf"><a href="#create-a-queue">Create a queue</a></li>
    <li class="level1 nav-leaf"><a href="#check-if-queue-exists">Check if queue exists</a></li>
    <li class="level1 nav-leaf"><a href="#update-queue-properties">Update queue properties</a></li>
    <li class="level1 nav-leaf"><a href="#delete-a-queue">Delete a queue</a></li>
  </ul>

  <p class="footer"></p>
</nav>



      <main class="content">

        <h1 id="managing-queues" class="title">Managing Queues</h1>
        <p>Managing queues is made using the <a class="api" href="https://www.javadoc.io/doc/com.commercetools/fs2-queues-docs_2.13/0.5.0/com/commercetools/queue/QueueAdministration.html">QueueAdministration</a>. You can acquire an instance through a <a class="api" href="https://www.javadoc.io/doc/com.commercetools/fs2-queues-docs_2.13/0.5.0/com/commercetools/queue/QueueClient.html">QueueClient</a> by using the <code>administration()</code> method. A <code>QueueAdministration</code> instance is <strong>not</strong> associated to any specific queue. The queue to operate on will be provided in each administration method.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">import</span><span> </span><span class="identifier">cats</span><span>.</span><span class="identifier">effect</span><span>.</span><span class="type-name">IO</span><span>

</span><span class="keyword">import</span><span> </span><span class="identifier">com</span><span>.</span><span class="identifier">commercetools</span><span>.</span><span class="identifier">queue</span><span>.{</span><span class="type-name">QueueAdministration</span><span>, </span><span class="type-name">QueueClient</span><span>}

</span><span class="keyword">def</span><span> </span><span class="declaration-name">client</span><span>: </span><span class="type-name">QueueClient</span><span>[</span><span class="type-name">IO</span><span>] = ???

</span><span class="keyword">def</span><span> </span><span class="declaration-name">admin</span><span>: </span><span class="type-name">QueueAdministration</span><span>[</span><span class="type-name">IO</span><span>] =
  </span><span class="identifier">client</span><span>.</span><span class="identifier">administration</span></code></pre>
        
        <h2 id="create-a-queue" class="section"><a class="anchor-link left" href="#create-a-queue"><i class="icofont-laika link">&#xef71;</i></a>Create a queue</h2>
        <p>A queue can be created by using the <code>create()</code> method.
        You need to provide the message TTL and lock TTL together with the new queue name.
        The different TTLs are defined at queue level and will affect messages published and subscribers.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">import</span><span> </span><span class="identifier">scala</span><span>.</span><span class="identifier">concurrent</span><span>.</span><span class="identifier">duration</span><span>.</span><span class="identifier">_</span><span>

</span><span class="identifier">admin</span><span>.</span><span class="identifier">create</span><span>(</span><span class="string-literal">&quot;my-queue&quot;</span><span>, </span><span class="identifier">messageTTL</span><span> = </span><span class="number-literal">14</span><span>.</span><span class="identifier">days</span><span>, </span><span class="identifier">lockTTL</span><span> = </span><span class="number-literal">2</span><span>.</span><span class="identifier">minutes</span><span>)</span></code></pre>
        <div class="callout info">
          <i class="icofont-laika info">&#xef4e;</i>
          <p>The <code>lockTTL</code> parameter has an influence on the behavior of the <a href="../subscribing/">subscriber</a> methods and streams. If you change it at runtime, you should restart the subscribing streams to ensure they are taken into account.</p>
        </div>
        
        <h2 id="check-if-queue-exists" class="section"><a class="anchor-link left" href="#check-if-queue-exists"><i class="icofont-laika link">&#xef71;</i></a>Check if queue exists</h2>
        <p>You can check the existence of a queue in the queue system by calling the <code>exists()</code> method.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">admin</span><span>.</span><span class="identifier">exists</span><span>(</span><span class="string-literal">&quot;my-queue&quot;</span><span>)</span></code></pre>
        
        <h2 id="update-queue-properties" class="section"><a class="anchor-link left" href="#update-queue-properties"><i class="icofont-laika link">&#xef71;</i></a>Update queue properties</h2>
        <p>The queue TTLs can be updated for an existing queue by using the <code>update()</code> method. The method accepts both TTLs as <code>Option[FiniteDuration]</code> with a default value of <code>None</code>. Only the defined TTLs will be updated. Values that are not provided are left unchanged.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="keyword">import</span><span> </span><span class="identifier">scala</span><span>.</span><span class="identifier">concurrent</span><span>.</span><span class="identifier">duration</span><span>.</span><span class="identifier">_</span><span>

</span><span class="comment">// only updates the lock TTL
</span><span class="identifier">admin</span><span>.</span><span class="identifier">update</span><span>(</span><span class="string-literal">&quot;my-queue&quot;</span><span>, </span><span class="identifier">lockTTL</span><span> = </span><span class="type-name">Some</span><span>(</span><span class="number-literal">5</span><span>.</span><span class="identifier">minutes</span><span>))

</span><span class="comment">// updates both the message and lock TTLs
</span><span class="identifier">admin</span><span>.</span><span class="identifier">update</span><span>(</span><span class="string-literal">&quot;my-queue&quot;</span><span>, </span><span class="identifier">messageTTL</span><span> = </span><span class="type-name">Some</span><span>(</span><span class="number-literal">1</span><span>.</span><span class="identifier">day</span><span>), </span><span class="identifier">lockTTL</span><span> = </span><span class="type-name">Some</span><span>(</span><span class="number-literal">5</span><span>.</span><span class="identifier">minutes</span><span>))</span></code></pre>
        
        <h2 id="delete-a-queue" class="section"><a class="anchor-link left" href="#delete-a-queue"><i class="icofont-laika link">&#xef71;</i></a>Delete a queue</h2>
        <p>You can delete an existing queue by calling the <code>delete()</code> method.</p>
        <pre class="keep-together pdf epub"><code class="nohighlight"><span class="identifier">admin</span><span>.</span><span class="identifier">delete</span><span>(</span><span class="string-literal">&quot;my-queue&quot;</span><span>)</span></code></pre>

        
<hr class="footer-rule"/>
<footer>
  Copyright &copy; <a href="https://commercetools.com/">commercetools</a>
</footer>


      </main>

    </div>

  </body>

</html>